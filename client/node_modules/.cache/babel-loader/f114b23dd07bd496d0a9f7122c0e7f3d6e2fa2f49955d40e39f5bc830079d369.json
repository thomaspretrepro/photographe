{"ast":null,"code":"import _objectSpread from\"/Users/thpretre/WWW/photographe/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./PhotoForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PhotoForm=()=>{const[formData,setFormData]=useState({albumId:'',photos:[{src:'',title:'',description:'',sortOrder:''}]});const[albums,setAlbums]=useState([]);const[errors,setErrors]=useState({});const navigate=useNavigate();useEffect(()=>{// Load albums from localStorage\nconst savedAlbums=JSON.parse(localStorage.getItem('albumsData')||'[]');setAlbums(savedAlbums);},[]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const handlePhotoChange=(index,field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{photos:prev.photos.map((photo,i)=>i===index?_objectSpread(_objectSpread({},photo),{},{[field]:value}):photo)}));// Clear error when user starts typing\nif(errors[\"photo_\".concat(index,\"_\").concat(field)]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[\"photo_\".concat(index,\"_\").concat(field)]:''}));}};const addPhotoField=()=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{photos:[...prev.photos,{src:'',title:'',description:'',sortOrder:''}]}));};const removePhotoField=index=>{if(formData.photos.length>1){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{photos:prev.photos.filter((_,i)=>i!==index)}));}};const validateForm=()=>{const newErrors={};if(!formData.albumId){newErrors.albumId='Veuillez sélectionner un album';}formData.photos.forEach((photo,index)=>{if(!photo.src.trim()){newErrors[\"photo_\".concat(index,\"_src\")]='L\\'URL de la photo est requise';}else if(!isValidUrl(photo.src)){newErrors[\"photo_\".concat(index,\"_src\")]='L\\'URL de la photo n\\'est pas valide';}if(photo.sortOrder&&isNaN(Number(photo.sortOrder))){newErrors[\"photo_\".concat(index,\"_sortOrder\")]='L\\'ordre de tri doit être un nombre';}});setErrors(newErrors);return Object.keys(newErrors).length===0;};const isValidUrl=string=>{try{new URL(string);return true;}catch(_){return false;}};const handleSubmit=e=>{e.preventDefault();if(!validateForm()){return;}const savedAlbums=JSON.parse(localStorage.getItem('albumsData')||'[]');// Find the album and add all photos\nconst updatedAlbums=savedAlbums.map(album=>{if(album.id===formData.albumId){const newPhotos=formData.photos.map((photo,index)=>({id:Date.now()+index,// Unique ID generation\nsrc:photo.src,title:photo.title||'',description:photo.description||'',sortOrder:photo.sortOrder?Number(photo.sortOrder):0}));return _objectSpread(_objectSpread({},album),{},{photos:[...(album.photos||[]),...newPhotos],photoCount:(album.photoCount||0)+newPhotos.length});}return album;});localStorage.setItem('albumsData',JSON.stringify(updatedAlbums));navigate('/admin/dashboard');};return/*#__PURE__*/_jsxs(\"div\",{className:\"photo-form-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ajouter des photos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/dashboard'),className:\"back-btn\",children:\"Retour\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"photo-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"albumId\",children:\"Album de destination *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"albumId\",name:\"albumId\",value:formData.albumId,onChange:handleChange,className:errors.albumId?'error':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez un album\"}),albums.map(album=>/*#__PURE__*/_jsxs(\"option\",{value:album.id,children:[album.title,\" (\",album.photoCount||0,\" photos)\"]},album.id))]}),errors.albumId&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.albumId})]}),formData.photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"photo-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"photo-group-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Photo \",index+1]}),formData.photos.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removePhotoField(index),className:\"remove-photo-btn\",children:\"Supprimer\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"src_\".concat(index),children:\"URL de la photo *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",id:\"src_\".concat(index),value:photo.src,onChange:e=>handlePhotoChange(index,'src',e.target.value),className:errors[\"photo_\".concat(index,\"_src\")]?'error':'',placeholder:\"https://example.com/photo.jpg\"}),errors[\"photo_\".concat(index,\"_src\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors[\"photo_\".concat(index,\"_src\")]}),photo.src&&isValidUrl(photo.src)&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview\",children:/*#__PURE__*/_jsx(\"img\",{src:photo.src,alt:\"Aper\\xE7u\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title_\".concat(index),children:\"Titre de la photo (optionnel)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title_\".concat(index),value:photo.title,onChange:e=>handlePhotoChange(index,'title',e.target.value),placeholder:\"Titre de la photo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description_\".concat(index),children:\"Description (optionnelle)\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description_\".concat(index),value:photo.description,onChange:e=>handlePhotoChange(index,'description',e.target.value),placeholder:\"Description de la photo\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sortOrder_\".concat(index),children:\"Ordre de tri (optionnel)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"sortOrder_\".concat(index),value:photo.sortOrder,onChange:e=>handlePhotoChange(index,'sortOrder',e.target.value),className:errors[\"photo_\".concat(index,\"_sortOrder\")]?'error':'',placeholder:\"1, 2, 3...\",min:\"0\"}),errors[\"photo_\".concat(index,\"_sortOrder\")]&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors[\"photo_\".concat(index,\"_sortOrder\")]}),/*#__PURE__*/_jsx(\"small\",{children:\"D\\xE9finit l'ordre d'affichage dans l'album (plus petit = affich\\xE9 en premier)\"})]})]},index)),/*#__PURE__*/_jsx(\"div\",{className:\"add-photo-section\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addPhotoField,className:\"add-photo-field-btn\",children:\"+ Ajouter une autre photo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/admin/dashboard'),className:\"cancel-btn\",children:\"Annuler\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"submit-btn\",children:[\"Ajouter \",formData.photos.length,\" photo\",formData.photos.length>1?'s':'']})]})]}),albums.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-albums-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Aucun album disponible. Vous devez d'abord cr\\xE9er un album avant d'ajouter des photos.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/albums/new'),className:\"create-album-btn\",children:\"Cr\\xE9er un album\"})]})]})})})]});};export default PhotoForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","PhotoForm","formData","setFormData","albumId","photos","src","title","description","sortOrder","albums","setAlbums","errors","setErrors","navigate","savedAlbums","JSON","parse","localStorage","getItem","handleChange","e","name","value","target","prev","_objectSpread","handlePhotoChange","index","field","map","photo","i","concat","addPhotoField","removePhotoField","length","filter","_","validateForm","newErrors","forEach","trim","isValidUrl","isNaN","Number","Object","keys","string","URL","handleSubmit","preventDefault","updatedAlbums","album","id","newPhotos","Date","now","photoCount","setItem","stringify","className","children","onClick","onSubmit","htmlFor","onChange","type","placeholder","alt","rows","min"],"sources":["/Users/thpretre/WWW/photographe/client/src/components/PhotoForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './PhotoForm.css';\n\nconst PhotoForm = () => {\n  const [formData, setFormData] = useState({\n    albumId: '',\n    photos: [{ src: '', title: '', description: '', sortOrder: '' }]\n  });\n  const [albums, setAlbums] = useState([]);\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Load albums from localStorage\n    const savedAlbums = JSON.parse(localStorage.getItem('albumsData') || '[]');\n    setAlbums(savedAlbums);\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const handlePhotoChange = (index, field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      photos: prev.photos.map((photo, i) =>\n        i === index ? { ...photo, [field]: value } : photo\n      )\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[`photo_${index}_${field}`]) {\n      setErrors(prev => ({\n        ...prev,\n        [`photo_${index}_${field}`]: ''\n      }));\n    }\n  };\n\n  const addPhotoField = () => {\n    setFormData(prev => ({\n      ...prev,\n      photos: [...prev.photos, { src: '', title: '', description: '', sortOrder: '' }]\n    }));\n  };\n\n  const removePhotoField = (index) => {\n    if (formData.photos.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        photos: prev.photos.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.albumId) {\n      newErrors.albumId = 'Veuillez sélectionner un album';\n    }\n    \n    formData.photos.forEach((photo, index) => {\n      if (!photo.src.trim()) {\n        newErrors[`photo_${index}_src`] = 'L\\'URL de la photo est requise';\n      } else if (!isValidUrl(photo.src)) {\n        newErrors[`photo_${index}_src`] = 'L\\'URL de la photo n\\'est pas valide';\n      }\n      \n      if (photo.sortOrder && isNaN(Number(photo.sortOrder))) {\n        newErrors[`photo_${index}_sortOrder`] = 'L\\'ordre de tri doit être un nombre';\n      }\n    });\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const isValidUrl = (string) => {\n    try {\n      new URL(string);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    const savedAlbums = JSON.parse(localStorage.getItem('albumsData') || '[]');\n    \n    // Find the album and add all photos\n    const updatedAlbums = savedAlbums.map(album => {\n      if (album.id === formData.albumId) {\n        const newPhotos = formData.photos.map((photo, index) => ({\n          id: Date.now() + index, // Unique ID generation\n          src: photo.src,\n          title: photo.title || '',\n          description: photo.description || '',\n          sortOrder: photo.sortOrder ? Number(photo.sortOrder) : 0\n        }));\n        \n        return {\n          ...album,\n          photos: [...(album.photos || []), ...newPhotos],\n          photoCount: (album.photoCount || 0) + newPhotos.length\n        };\n      }\n      return album;\n    });\n    \n    localStorage.setItem('albumsData', JSON.stringify(updatedAlbums));\n    navigate('/admin/dashboard');\n  };\n\n  return (\n    <div className=\"photo-form-page\">\n      <div className=\"admin-header\">\n        <div className=\"container\">\n          <div className=\"header-content\">\n            <h1>Ajouter des photos</h1>\n            <button \n              onClick={() => navigate('/admin/dashboard')} \n              className=\"back-btn\"\n            >\n              Retour\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"form-content\">\n        <div className=\"container\">\n          <div className=\"form-container\">\n            <form onSubmit={handleSubmit} className=\"photo-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"albumId\">Album de destination *</label>\n                <select\n                  id=\"albumId\"\n                  name=\"albumId\"\n                  value={formData.albumId}\n                  onChange={handleChange}\n                  className={errors.albumId ? 'error' : ''}\n                >\n                  <option value=\"\">Sélectionnez un album</option>\n                  {albums.map(album => (\n                    <option key={album.id} value={album.id}>\n                      {album.title} ({album.photoCount || 0} photos)\n                    </option>\n                  ))}\n                </select>\n                {errors.albumId && <span className=\"error-text\">{errors.albumId}</span>}\n              </div>\n\n              {formData.photos.map((photo, index) => (\n                <div key={index} className=\"photo-group\">\n                  <div className=\"photo-group-header\">\n                    <h3>Photo {index + 1}</h3>\n                    {formData.photos.length > 1 && (\n                      <button\n                        type=\"button\"\n                        onClick={() => removePhotoField(index)}\n                        className=\"remove-photo-btn\"\n                      >\n                        Supprimer\n                      </button>\n                    )}\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor={`src_${index}`}>URL de la photo *</label>\n                    <input\n                      type=\"url\"\n                      id={`src_${index}`}\n                      value={photo.src}\n                      onChange={(e) => handlePhotoChange(index, 'src', e.target.value)}\n                      className={errors[`photo_${index}_src`] ? 'error' : ''}\n                      placeholder=\"https://example.com/photo.jpg\"\n                    />\n                    {errors[`photo_${index}_src`] && (\n                      <span className=\"error-text\">{errors[`photo_${index}_src`]}</span>\n                    )}\n                    {photo.src && isValidUrl(photo.src) && (\n                      <div className=\"image-preview\">\n                        <img src={photo.src} alt=\"Aperçu\" />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor={`title_${index}`}>Titre de la photo (optionnel)</label>\n                    <input\n                      type=\"text\"\n                      id={`title_${index}`}\n                      value={photo.title}\n                      onChange={(e) => handlePhotoChange(index, 'title', e.target.value)}\n                      placeholder=\"Titre de la photo\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor={`description_${index}`}>Description (optionnelle)</label>\n                    <textarea\n                      id={`description_${index}`}\n                      value={photo.description}\n                      onChange={(e) => handlePhotoChange(index, 'description', e.target.value)}\n                      placeholder=\"Description de la photo\"\n                      rows=\"3\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor={`sortOrder_${index}`}>Ordre de tri (optionnel)</label>\n                    <input\n                      type=\"number\"\n                      id={`sortOrder_${index}`}\n                      value={photo.sortOrder}\n                      onChange={(e) => handlePhotoChange(index, 'sortOrder', e.target.value)}\n                      className={errors[`photo_${index}_sortOrder`] ? 'error' : ''}\n                      placeholder=\"1, 2, 3...\"\n                      min=\"0\"\n                    />\n                    {errors[`photo_${index}_sortOrder`] && (\n                      <span className=\"error-text\">{errors[`photo_${index}_sortOrder`]}</span>\n                    )}\n                    <small>Définit l'ordre d'affichage dans l'album (plus petit = affiché en premier)</small>\n                  </div>\n                </div>\n              ))}\n\n              <div className=\"add-photo-section\">\n                <button\n                  type=\"button\"\n                  onClick={addPhotoField}\n                  className=\"add-photo-field-btn\"\n                >\n                  + Ajouter une autre photo\n                </button>\n              </div>\n\n              <div className=\"form-actions\">\n                <button \n                  type=\"button\" \n                  onClick={() => navigate('/admin/dashboard')}\n                  className=\"cancel-btn\"\n                >\n                  Annuler\n                </button>\n                <button type=\"submit\" className=\"submit-btn\">\n                  Ajouter {formData.photos.length} photo{formData.photos.length > 1 ? 's' : ''}\n                </button>\n              </div>\n            </form>\n\n            {albums.length === 0 && (\n              <div className=\"no-albums-message\">\n                <p>Aucun album disponible. Vous devez d'abord créer un album avant d'ajouter des photos.</p>\n                <button \n                  onClick={() => navigate('/admin/albums/new')}\n                  className=\"create-album-btn\"\n                >\n                  Créer un album\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PhotoForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}